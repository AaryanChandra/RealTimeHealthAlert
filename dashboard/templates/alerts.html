<!DOCTYPE html>
<html>
<head>
    <title>Alert History</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-4">
    <h2>⚠️ Health Alert History</h2>
    <a href="/" class="btn btn-primary mb-3">← Back to Dashboard</a>

    <table class="table table-bordered">
        <thead class="table-danger">
            <tr>
                <th>Patient</th>
                <th>Issue</th>
                <th>Severity</th>
                <th>Timestamp</th>
            </tr>
        </thead>
        <tbody>
            {% for row in alerts %}
                <tr class="{% if row.severity == 'Critical' %}table-danger{% elif row.severity == 'Warning' %}table-warning{% else %}table-success{% endif %}">
                    <td>
                        {{ patients[row.patient_id].name if row.patient_id in patients else 'Patient ' ~ row.patient_id }}
                        (ID: {{ row.patient_id }})
                    </td>
                    <td>{{ row.anomalies }}</td>
                    <td>
                        <span class="badge {% if row.severity == 'Critical' %}bg-danger{% elif row.severity == 'Warning' %}bg-warning text-dark{% else %}bg-success{% endif %}">
                            {{ row.severity }}
                        </span>
                    </td>
                    <td>{{ row.timestamp }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
</body>
</html>
